# –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞–º–∏ (OSA)

–≠—Ç–æ API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π, –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ –Ω–∞ Cloudflare Workers –∏ –∏—Å–ø–æ–ª—å–∑—É—é—â–µ–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π GitHub –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –¥–∞–Ω–Ω—ã—Ö. –°–∏—Å—Ç–µ–º–∞ —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∞ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ–ø–∏—Å–∞–Ω–∏–π –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –≤ —Ñ–æ—Ä–º–∞—Ç–µ Markdown, –∏—Ö —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞.

## üöÄ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–°–∏—Å—Ç–µ–º–∞ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–ª—é—á–µ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:

1.  **Cloudflare Worker (`worker.js`)**: –í—ã–ø–æ–ª–Ω—è–µ—Ç —Ä–æ–ª—å —Å–µ—Ä–≤–µ—Ä–Ω–æ–π —á–∞—Å—Ç–∏ (API). –û–Ω –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏—Ö, –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç —Å GitHub API –∏, –ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ, —Å –ò–ò-–ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–º –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.
2.  **GitHub –∫–∞–∫ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**:
    *   –ö–∞–∂–¥—ã–π –ø–µ—Ä—Å–æ–Ω–∞–∂ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –≤–∏–¥–µ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ Markdown-—Ñ–∞–π–ª–∞ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `/characters/`.
    *   –î–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏–Ω–¥–µ–∫—Å–Ω—ã–π —Ñ–∞–π–ª `characters-index.json`, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–¥–µ—Ä–∂–∏—Ç –æ—Å–Ω–æ–≤–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏ –ø–æ–∏—Å–∫–æ–≤—ã–µ —Ç–µ—Ä–º–∏–Ω—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞.
3.  **–ò–ò-–ø—Ä–æ–≤–∞–π–¥–µ—Ä**: –í —Ñ–∞–π–ª–µ `.env` —É–∫–∞–∑–∞–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ API –ò–ò (–Ω–∞–ø—Ä–∏–º–µ—Ä, OpenAI). –≠—Ç–æ –≥–æ–≤–æ—Ä–∏—Ç –æ —Ç–æ–º, —á—Ç–æ —Å–∏—Å—Ç–µ–º–∞ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–æ–¥–µ–ª—å –ò–ò –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –æ–ø–∏—Å–∞–Ω–∏–π.
4.  **Markdown-first –ø–æ–¥—Ö–æ–¥**: –û—Å–Ω–æ–≤–Ω–æ–π —Å–ø–æ—Å–æ–± –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π ‚Äî –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –æ–ø–∏—Å–∞–Ω–∏—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ Markdown. –≠—Ç–æ —É–ø—Ä–æ—â–∞–µ—Ç –≤–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö –∏ –¥–µ–ª–∞–µ—Ç —Å–∏—Å—Ç–µ–º—É –±–æ–ª–µ–µ –≥–∏–±–∫–æ–π.

## üõ†Ô∏è API –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

–û—Å–Ω–æ–≤–Ω–æ–π URL –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤: `https://osa.mvictoria-illu.workers.dev`

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞

`POST /add-character-md`

–≠—Ç–æ—Ç —ç–Ω–¥–ø–æ–∏–Ω—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤—ã—Ö, —Ç–∞–∫ –∏ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π. –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –Ω—É–∂–Ω–æ –ª–∏ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –∏–ª–∏ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ä–æ–≥–æ, –ø–æ –∏–º–µ–Ω–∏ –≤ Markdown-—Ñ–∞–π–ª–µ.

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**

```json
{
  "markdown": "–¢–µ–∫—Å—Ç–æ–≤–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ Markdown..."
}
```

**–ü—Ä–∏–º–µ—Ä –æ–ø–∏—Å–∞–Ω–∏—è –≤ `markdown`:**

```markdown
# –ö–ê–≠–õ–†–ò–ê–° –≠–õ–†–ò–ê–°

## –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
–ü—Å–µ–≤–¥–æ–Ω–∏–º—ã: –ö–∞–π
–°—Ç–∞—Ç—É—Å: –ü—Ä–∏–Ω—Ü –≠–ª—Ä–∏–∞—Å—Ç–∞
...
```

### –ü–æ–∏—Å–∫ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π

`GET /search-characters?query=<—Å—Ç—Ä–æ–∫–∞_–ø–æ–∏—Å–∫–∞>`

–ü–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞–π—Ç–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –ø–æ –∏–º–µ–Ω–∏, –ø—Å–µ–≤–¥–æ–Ω–∏–º—É, —Ä–∞—Å–µ, —Å—Ç–∞—Ç—É—Å—É –∏–ª–∏ –¥—Ä—É–≥–∏–º –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º –∏–∑ –∏—Ö –æ–ø–∏—Å–∞–Ω–∏—è.

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**

```bash
curl "https://osa.mvictoria-illu.workers.dev/search-characters?query=–ö–∞–π"
```

### –£—Å—Ç–∞—Ä–µ–≤—à–∏–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

*   `POST /add-character`: –ó–∞–º–µ–Ω—ë–Ω –Ω–∞ `/add-character-md`.
*   `PUT /update-character`: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ–ø–µ—Ä—å —Ç–∞–∫–∂–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ `/add-character-md`.

## ‚öôÔ∏è –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞

1.  –ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –≤ —Ç–µ–∫—Å—Ç–æ–≤–æ–º –∏–ª–∏ Markdown —Ñ–æ—Ä–º–∞—Ç–µ.
2.  –û—Ç–ø—Ä–∞–≤—å—Ç–µ POST-–∑–∞–ø—Ä–æ—Å –Ω–∞ `/add-character-md`, –≤–ª–æ–∂–∏–≤ —Ç–µ–∫—Å—Ç –≤ –ø–æ–ª–µ `markdown`.

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞

1.  –ù–∞–π–¥–∏—Ç–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ —á–µ—Ä–µ–∑ –ø–æ–∏—Å–∫, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –µ–≥–æ —Ç–µ–∫—É—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ.
2.  –í–Ω–µ—Å–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ç–µ–∫—Å—Ç.
3.  –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∏–∑–º–µ–Ω—ë–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –Ω–∞ —Ç–æ—Ç –∂–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç `/add-character-md`. –°–∏—Å—Ç–µ–º–∞ –Ω–∞–π–¥—ë—Ç –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ –ø–æ –∏–º–µ–Ω–∏ –∏ –ø–µ—Ä–µ–∑–∞–ø–∏—à–µ—Ç –µ–≥–æ —Ñ–∞–π–ª.

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

–î–ª—è —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è –∏–ª–∏ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –ø–æ –ø—Ä–∏–º–µ—Ä—É:

```env
# –¢–æ–∫–µ–Ω –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ API GitHub
# –ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–∑–¥–∞—Ç—å Personal Access Token —Å –ø—Ä–∞–≤–∞–º–∏ –Ω–∞ —á—Ç–µ–Ω–∏–µ/–∑–∞–ø–∏—Å—å –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
GITHUB_TOKEN="your_github_pat_here"

# URL –¥–ª—è API –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –ò–ò (–Ω–∞–ø—Ä–∏–º–µ—Ä, OpenAI, Anthropic, –∏–ª–∏ –¥—Ä—É–≥–æ–π)
AI_PROVIDER_URL="https://api.openai.com/v1/chat/completions"

# –¢–æ–∫–µ–Ω –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —É –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –ò–ò
AI_PROVIDER_TOKEN="your_ai_provider_token_here"

# –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç –¥–ª—è –º–æ–¥–µ–ª–∏ –ò–ò
SYSTEM_PROMPT="–¢—ã ‚Äî —ç–∫—Å–ø–µ—Ä—Ç –ø–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—é –¥–∞–Ω–Ω—ã—Ö –æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞—Ö..."
```
